import{S as yt,i as $t,s as Nt,k as n,q as N,a as p,y as _t,l as r,m as c,r as k,h as s,c as m,z as pt,n as y,b as st,C as t,A as mt,H as nt,g as vt,d as bt,B as gt,E as kt,F as Ut,u as lt,O as wt,w as Ht,R as Et,U as St}from"../chunks/index.1fbcc1c5.js";import{p as Bt}from"../chunks/stores.6c0fa00a.js";import{P as Ct,M as Ot}from"../chunks/pagination.a78ef5e4.js";import{a as Tt}from"../chunks/alerter.2a49f4f8.js";function At(a,e,i){const f=a.slice();return f[8]=e[i],f[9]=e,f[10]=i,f}function Dt(a){let e,i,f=a[10]+1+"",U,v,d,D=a[8].name+"",A,S,l,u=a[8]._count.users+"",_,$,L,P=a[8].createdAt.toLocaleString()+"",R,w,b,B=a[8].updatedAt.toLocaleString()+"",V,F,C,H,J,M,Y,x,Q,j,tt,G,X,q;function et(){a[5].call(H,a[9],a[10])}return{c(){e=n("tr"),i=n("td"),U=N(f),v=p(),d=n("td"),A=N(D),S=p(),l=n("td"),_=N(u),$=p(),L=n("td"),R=N(P),w=p(),b=n("td"),V=N(B),F=p(),C=n("td"),H=n("input"),J=p(),M=n("td"),Y=n("button"),x=N("Edit"),Q=p(),j=n("button"),tt=N("Delete"),G=p(),this.h()},l(z){e=r(z,"TR",{});var h=c(e);i=r(h,"TD",{});var W=c(i);U=k(W,f),W.forEach(s),v=m(h),d=r(h,"TD",{});var g=c(d);A=k(g,D),g.forEach(s),S=m(h),l=r(h,"TD",{});var at=c(l);_=k(at,u),at.forEach(s),$=m(h),L=r(h,"TD",{});var o=c(L);R=k(o,P),o.forEach(s),w=m(h),b=r(h,"TD",{});var E=c(b);V=k(E,B),E.forEach(s),F=m(h),C=r(h,"TD",{});var O=c(C);H=r(O,"INPUT",{class:!0,type:!0}),O.forEach(s),J=m(h),M=r(h,"TD",{});var K=c(M);Y=r(K,"BUTTON",{class:!0});var T=c(Y);x=k(T,"Edit"),T.forEach(s),Q=m(K),j=r(K,"BUTTON",{class:!0});var Z=c(j);tt=k(Z,"Delete"),Z.forEach(s),K.forEach(s),G=m(h),h.forEach(s),this.h()},h(){y(H,"class","toggle toggle-primary"),y(H,"type","checkbox"),y(Y,"class","btn btn-sm btn-primary"),y(j,"class","btn btn-sm btn-error")},m(z,h){st(z,e,h),t(e,i),t(i,U),t(e,v),t(e,d),t(d,A),t(e,S),t(e,l),t(l,_),t(e,$),t(e,L),t(L,R),t(e,w),t(e,b),t(b,V),t(e,F),t(e,C),t(C,H),H.checked=a[8].isActive,t(e,J),t(e,M),t(M,Y),t(Y,x),t(M,Q),t(M,j),t(j,tt),t(e,G),X||(q=nt(H,"change",et),X=!0)},p(z,h){a=z,h&1&&D!==(D=a[8].name+"")&&lt(A,D),h&1&&u!==(u=a[8]._count.users+"")&&lt(_,u),h&1&&P!==(P=a[8].createdAt.toLocaleString()+"")&&lt(R,P),h&1&&B!==(B=a[8].updatedAt.toLocaleString()+"")&&lt(V,B),h&1&&(H.checked=a[8].isActive)},d(z){z&&s(e),X=!1,q()}}}function It(a){let e,i,f,U,v,d,D,A,S,l,u,_,$,L,P,R;return{c(){e=n("div"),i=n("h1"),f=N("New role"),U=p(),v=n("div"),d=n("label"),D=n("span"),A=N("name"),S=p(),l=n("input"),u=p(),_=n("div"),$=n("button"),L=N("Create"),this.h()},l(w){e=r(w,"DIV",{class:!0});var b=c(e);i=r(b,"H1",{class:!0});var B=c(i);f=k(B,"New role"),B.forEach(s),U=m(b),v=r(b,"DIV",{class:!0});var V=c(v);d=r(V,"LABEL",{class:!0});var F=c(d);D=r(F,"SPAN",{class:!0});var C=c(D);A=k(C,"name"),C.forEach(s),F.forEach(s),S=m(V),l=r(V,"INPUT",{type:!0,placeholder:!0,class:!0}),V.forEach(s),u=m(b),_=r(b,"DIV",{class:!0});var H=c(_);$=r(H,"BUTTON",{class:!0});var J=c($);L=k(J,"Create"),J.forEach(s),H.forEach(s),b.forEach(s),this.h()},h(){y(i,"class","text-2xl"),y(D,"class","label-text"),y(d,"class","label"),y(l,"type","text"),y(l,"placeholder","name"),y(l,"class","input input-bordered"),y(v,"class","form-control"),y($,"class","btn btn-primary"),y(_,"class","form-control mt-6"),y(e,"class","card-body")},m(w,b){st(w,e,b),t(e,i),t(i,f),t(e,U),t(e,v),t(v,d),t(d,D),t(D,A),t(v,S),t(v,l),Et(l,a[2].name),t(e,u),t(e,_),t(_,$),t($,L),P||(R=[nt(l,"input",a[6]),nt($,"click",a[4])],P=!0)},p(w,b){b&4&&l.value!==w[2].name&&Et(l,w[2].name)},d(w){w&&s(e),P=!1,St(R)}}}function Lt(a){let e,i,f,U,v,d,D,A,S,l,u,_,$,L,P,R,w,b,B,V,F,C,H,J,M,Y,x,Q,j,tt,G,X,q,et,z,h;d=new Ct({props:{pagination:a[0].pagination,url:a[3].url.href}});let W=a[0].roles,g=[];for(let o=0;o<W.length;o+=1)g[o]=Dt(At(a,W,o));let at={$$slots:{default:[It]},$$scope:{ctx:a}};return q=new Ot({props:at}),a[7](q),{c(){e=n("div"),i=n("div"),f=n("button"),U=N("Create"),v=p(),_t(d.$$.fragment),D=p(),A=n("table"),S=n("thead"),l=n("tr"),u=n("th"),_=p(),$=n("th"),L=N("Name"),P=p(),R=n("th"),w=N("Users"),b=p(),B=n("th"),V=N("Created @"),F=p(),C=n("th"),H=N("Updated @"),J=p(),M=n("th"),Y=N("Active"),x=p(),Q=n("th"),j=N("Actions"),tt=p(),G=n("tbody");for(let o=0;o<g.length;o+=1)g[o].c();X=p(),_t(q.$$.fragment),this.h()},l(o){e=r(o,"DIV",{class:!0});var E=c(e);i=r(E,"DIV",{class:!0});var O=c(i);f=r(O,"BUTTON",{class:!0});var K=c(f);U=k(K,"Create"),K.forEach(s),O.forEach(s),v=m(E),pt(d.$$.fragment,E),D=m(E),A=r(E,"TABLE",{class:!0});var T=c(A);S=r(T,"THEAD",{});var Z=c(S);l=r(Z,"TR",{});var I=c(l);u=r(I,"TH",{}),c(u).forEach(s),_=m(I),$=r(I,"TH",{});var ot=c($);L=k(ot,"Name"),ot.forEach(s),P=m(I),R=r(I,"TH",{});var ct=c(R);w=k(ct,"Users"),ct.forEach(s),b=m(I),B=r(I,"TH",{});var it=c(B);V=k(it,"Created @"),it.forEach(s),F=m(I),C=r(I,"TH",{});var dt=c(C);H=k(dt,"Updated @"),dt.forEach(s),J=m(I),M=r(I,"TH",{});var ht=c(M);Y=k(ht,"Active"),ht.forEach(s),x=m(I),Q=r(I,"TH",{});var ut=c(Q);j=k(ut,"Actions"),ut.forEach(s),I.forEach(s),Z.forEach(s),tt=m(T),G=r(T,"TBODY",{});var ft=c(G);for(let rt=0;rt<g.length;rt+=1)g[rt].l(ft);ft.forEach(s),T.forEach(s),E.forEach(s),X=m(o),pt(q.$$.fragment,o),this.h()},h(){y(f,"class","btn btn-primary"),y(i,"class","flex flex-row mb-4"),y(A,"class","table table-zebra w-full"),y(e,"class","overflow-x-auto flex flex-col")},m(o,E){st(o,e,E),t(e,i),t(i,f),t(f,U),t(e,v),mt(d,e,null),t(e,D),t(e,A),t(A,S),t(S,l),t(l,u),t(l,_),t(l,$),t($,L),t(l,P),t(l,R),t(R,w),t(l,b),t(l,B),t(B,V),t(l,F),t(l,C),t(C,H),t(l,J),t(l,M),t(M,Y),t(l,x),t(l,Q),t(Q,j),t(A,tt),t(A,G);for(let O=0;O<g.length;O+=1)g[O]&&g[O].m(G,null);st(o,X,E),mt(q,o,E),et=!0,z||(h=nt(f,"click",function(){wt(a[1].open)&&a[1].open.apply(this,arguments)}),z=!0)},p(o,[E]){a=o;const O={};if(E&1&&(O.pagination=a[0].pagination),E&8&&(O.url=a[3].url.href),d.$set(O),E&1){W=a[0].roles;let T;for(T=0;T<W.length;T+=1){const Z=At(a,W,T);g[T]?g[T].p(Z,E):(g[T]=Dt(Z),g[T].c(),g[T].m(G,null))}for(;T<g.length;T+=1)g[T].d(1);g.length=W.length}const K={};E&2052&&(K.$$scope={dirty:E,ctx:a}),q.$set(K)},i(o){et||(vt(d.$$.fragment,o),vt(q.$$.fragment,o),et=!0)},o(o){bt(d.$$.fragment,o),bt(q.$$.fragment,o),et=!1},d(o){o&&s(e),gt(d),kt(g,o),o&&s(X),a[7](null),gt(q,o),z=!1,h()}}}function Pt(a,e,i){let f;Ut(a,Bt,u=>i(3,f=u));let U,{data:v}=e,d={name:""};async function D(){(await fetch("/api/roles/create",{method:"POST",body:JSON.stringify(d)})).ok?(Tt.update(_=>[..._,{type:"success",message:"Role created"}]),U.close()):Tt.update(_=>[..._,{type:"error",message:"Failed to create role"}])}function A(u,_){u[_].isActive=this.checked,i(0,v)}function S(){d.name=this.value,i(2,d)}function l(u){Ht[u?"unshift":"push"](()=>{U=u,i(1,U)})}return a.$$set=u=>{"data"in u&&i(0,v=u.data)},[v,U,d,f,D,A,S,l]}class zt extends yt{constructor(e){super(),$t(this,e,Pt,Lt,Nt,{data:0})}}export{zt as default};
