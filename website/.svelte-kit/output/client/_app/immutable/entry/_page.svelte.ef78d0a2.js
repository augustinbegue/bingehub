import{S as P,i as x,s as F,k as D,l as I,m as y,h as _,b as W,D as U,o as K,O as N,P as O,n,C as v,a as z,y as X,c as S,z as Y,A as Z,g as H,d as A,f as te,E as le,B as $,q as B,r as G,Q as C,u as ee,v as ae}from"../chunks/index.c7fa5583.js";function se(f){let e;return{c(){e=D("div")},l(t){e=I(t,"DIV",{}),y(e).forEach(_)},m(t,a){W(t,e,a)},p:U,i:U,o:U,d(t){t&&_(e)}}}function re(f,e,t){let{horizontal:a=!1}=e,{threshold:i=200}=e,{loadMore:u}=e,w=!1;function d(s){let c=document.querySelector("html");if(!c)return;(a?c.scrollWidth-c.clientWidth-c.scrollLeft:c.scrollHeight-c.clientHeight-c.scrollTop)<=i?(w||u==null||u(),w=!0):w=!1}return K(()=>{window.onscroll=d}),f.$$set=s=>{"horizontal"in s&&t(0,a=s.horizontal),"threshold"in s&&t(1,i=s.threshold),"loadMore"in s&&t(2,u=s.loadMore)},[a,i,u]}class ie extends P{constructor(e){super(),x(this,e,re,se,F,{horizontal:0,threshold:1,loadMore:2})}}function ne(f){let e,t;return{c(){e=N("svg"),t=N("circle"),this.h()},l(a){e=O(a,"svg",{class:!0,viewBox:!0});var i=y(e);t=O(i,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,"stroke-width":!0}),y(t).forEach(_),i.forEach(_),this.h()},h(){n(t,"class","path svelte-1pn6z57"),n(t,"cx","25"),n(t,"cy","25"),n(t,"r","20"),n(t,"fill","none"),n(t,"stroke-width","5"),n(e,"class","spinner svelte-1pn6z57"),n(e,"viewBox","0 0 50 50")},m(a,i){W(a,e,i),v(e,t)},p:U,i:U,o:U,d(a){a&&_(e)}}}class ce extends P{constructor(e){super(),x(this,e,null,ne,F,{})}}function Q(f,e,t){const a=f.slice();return a[7]=e[t],a[9]=t,a}function R(f){var k;let e,t,a,i,u,w,d,s,c,r,o=((k=f[2])==null?void 0:k.title)+"",l,g,h,m,p;return{c(){e=D("div"),t=D("img"),u=z(),w=D("div"),d=z(),s=D("div"),c=D("div"),r=D("h1"),l=B(o),g=z(),h=D("a"),m=B("Watch"),this.h()},l(E){e=I(E,"DIV",{class:!0});var b=y(e);t=I(b,"IMG",{class:!0,src:!0,alt:!0}),u=S(b),w=I(b,"DIV",{class:!0}),y(w).forEach(_),d=S(b),s=I(b,"DIV",{class:!0});var V=y(s);c=I(V,"DIV",{});var M=y(c);r=I(M,"H1",{class:!0});var j=y(r);l=G(j,o),j.forEach(_),g=S(M),h=I(M,"A",{class:!0,href:!0});var q=y(h);m=G(q,"Watch"),q.forEach(_),M.forEach(_),V.forEach(_),b.forEach(_),this.h()},h(){var E,b,V,M;n(t,"class","hero-image"),C(t.src,a=(b=(E=f[2])==null?void 0:E.media)==null?void 0:b.thumbnailDataUrl)||n(t,"src",a),n(t,"alt",i=(V=f[2])==null?void 0:V.title),n(w,"class","hero-overlay bg-opacity-90"),n(r,"class","mb-5 text-5xl font-bold"),n(h,"class","btn btn-primary"),n(h,"href",p="/watch/"+((M=f[2])==null?void 0:M.uid)),n(s,"class","hero-content text-neutral-content my-32"),n(e,"class","hero")},m(E,b){W(E,e,b),v(e,t),v(e,u),v(e,w),v(e,d),v(e,s),v(s,c),v(c,r),v(r,l),v(c,g),v(c,h),v(h,m)},p(E,b){var V,M,j,q,L;b&4&&!C(t.src,a=(M=(V=E[2])==null?void 0:V.media)==null?void 0:M.thumbnailDataUrl)&&n(t,"src",a),b&4&&i!==(i=(j=E[2])==null?void 0:j.title)&&n(t,"alt",i),b&4&&o!==(o=((q=E[2])==null?void 0:q.title)+"")&&ee(l,o),b&4&&p!==(p="/watch/"+((L=E[2])==null?void 0:L.uid))&&n(h,"href",p)},d(E){E&&_(e)}}}function T(f){let e,t,a,i,u,w,d,s,c=f[7].title+"",r,o,l,g,h,m;return{c(){e=D("div"),t=D("figure"),a=D("img"),w=z(),d=D("div"),s=D("h2"),r=B(c),o=z(),l=D("a"),g=B("Watch"),m=z(),this.h()},l(p){e=I(p,"DIV",{class:!0});var k=y(e);t=I(k,"FIGURE",{});var E=y(t);a=I(E,"IMG",{src:!0,alt:!0}),E.forEach(_),w=S(k),d=I(k,"DIV",{class:!0});var b=y(d);s=I(b,"H2",{class:!0});var V=y(s);r=G(V,c),V.forEach(_),o=S(b),l=I(b,"A",{class:!0,href:!0});var M=y(l);g=G(M,"Watch"),M.forEach(_),b.forEach(_),m=S(k),k.forEach(_),this.h()},h(){var p;C(a.src,i=(p=f[7].media)==null?void 0:p.thumbnailDataUrl)||n(a,"src",i),n(a,"alt",u=f[7].title),n(s,"class","card-title"),n(l,"class","btn btn-primary"),n(l,"href",h="/watch/"+f[7].uid),n(d,"class","card-body justify-end"),n(e,"class","card shadow-xl image-full")},m(p,k){W(p,e,k),v(e,t),v(t,a),v(e,w),v(e,d),v(d,s),v(s,r),v(d,o),v(d,l),v(l,g),v(e,m)},p(p,k){var E;k&2&&!C(a.src,i=(E=p[7].media)==null?void 0:E.thumbnailDataUrl)&&n(a,"src",i),k&2&&u!==(u=p[7].title)&&n(a,"alt",u),k&2&&c!==(c=p[7].title+"")&&ee(r,c),k&2&&h!==(h="/watch/"+p[7].uid)&&n(l,"href",h)},d(p){p&&_(e)}}}function J(f){let e,t;return e=new ce({}),{c(){X(e.$$.fragment)},l(a){Y(e.$$.fragment,a)},m(a,i){Z(e,a,i),t=!0},i(a){t||(H(e.$$.fragment,a),t=!0)},o(a){A(e.$$.fragment,a),t=!1},d(a){$(e,a)}}}function oe(f){let e,t,a,i,u,w,d,s=f[2]&&R(f),c=f[1],r=[];for(let l=0;l<c.length;l+=1)r[l]=T(Q(f,c,l));u=new ie({props:{loadMore:f[6]}});let o=f[3]&&J();return{c(){s&&s.c(),e=z(),t=D("div");for(let l=0;l<r.length;l+=1)r[l].c();a=z(),i=D("div"),X(u.$$.fragment),w=z(),o&&o.c(),this.h()},l(l){s&&s.l(l),e=S(l),t=I(l,"DIV",{class:!0});var g=y(t);for(let m=0;m<r.length;m+=1)r[m].l(g);g.forEach(_),a=S(l),i=I(l,"DIV",{class:!0});var h=y(i);Y(u.$$.fragment,h),w=S(h),o&&o.l(h),h.forEach(_),this.h()},h(){n(t,"class","container mx-auto grid grid-cols-3 gap-8 mt-8"),n(i,"class","container mx-auto flex flex-row justify-center p-32")},m(l,g){s&&s.m(l,g),W(l,e,g),W(l,t,g);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(t,null);W(l,a,g),W(l,i,g),Z(u,i,null),v(i,w),o&&o.m(i,null),d=!0},p(l,[g]){if(l[2]?s?s.p(l,g):(s=R(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),g&2){c=l[1];let m;for(m=0;m<c.length;m+=1){const p=Q(l,c,m);r[m]?r[m].p(p,g):(r[m]=T(p),r[m].c(),r[m].m(t,null))}for(;m<r.length;m+=1)r[m].d(1);r.length=c.length}const h={};g&11&&(h.loadMore=l[6]),u.$set(h),l[3]?o?g&8&&H(o,1):(o=J(),o.c(),H(o,1),o.m(i,null)):o&&(ae(),A(o,1,1,()=>{o=null}),te())},i(l){d||(H(u.$$.fragment,l),H(o),d=!0)},o(l){A(u.$$.fragment,l),A(o),d=!1},d(l){s&&s.d(l),l&&_(e),l&&_(t),le(r,l),l&&_(a),l&&_(i),$(u),o&&o.d()}}}function fe(f,e,t){let{data:a}=e,i=1,u=[],w,d=!1;async function s(r=9){t(3,d=!0);const l=await(await fetch(`/api/medias?page=${i}&count=${r}`)).json();return t(3,d=!1),l}K(async()=>{let r=await s(10);t(2,w=r.medias[0]),r.medias.shift(),t(1,u=r.medias)});const c=async()=>{if(!d){t(0,i++,i);let r=await s(9);t(1,u=[...u,...r.medias])}};return f.$$set=r=>{"data"in r&&t(5,a=r.data)},[i,u,w,d,s,a,c]}class he extends P{constructor(e){super(),x(this,e,fe,oe,F,{data:5})}}export{he as default};
