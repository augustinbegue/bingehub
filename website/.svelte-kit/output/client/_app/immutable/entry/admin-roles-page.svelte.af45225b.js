import{S as yt,i as $t,s as Nt,k as n,q as N,a as p,y as _t,l as r,m as c,r as k,h as s,c as m,z as pt,n as y,b as st,C as t,A as mt,H as nt,g as vt,d as bt,B as gt,E as kt,F as wt,u as lt,T as Ht,w as Ut,W as Et,R as St}from"../chunks/index.c7fa5583.js";import{p as Bt}from"../chunks/stores.1249a1df.js";import{M as Ct}from"../chunks/Modal.ca3fada1.js";import{P as It}from"../chunks/pagination.82eda5f1.js";import{a as Tt}from"../chunks/alerter.a508b1c7.js";function At(a,e,i){const f=a.slice();return f[8]=e[i],f[9]=e,f[10]=i,f}function Dt(a){let e,i,f=a[10]+1+"",w,v,d,D=a[8].name+"",A,S,l,u=a[8]._count.users+"",_,$,O,P=a[8].createdAt.toLocaleString()+"",R,H,b,B=a[8].updatedAt.toLocaleString()+"",V,F,C,U,J,M,W,x,K,Y,tt,j,X,q;function et(){a[5].call(U,a[9],a[10])}return{c(){e=n("tr"),i=n("td"),w=N(f),v=p(),d=n("td"),A=N(D),S=p(),l=n("td"),_=N(u),$=p(),O=n("td"),R=N(P),H=p(),b=n("td"),V=N(B),F=p(),C=n("td"),U=n("input"),J=p(),M=n("td"),W=n("button"),x=N("Edit"),K=p(),Y=n("button"),tt=N("Delete"),j=p(),this.h()},l(z){e=r(z,"TR",{});var h=c(e);i=r(h,"TD",{});var Q=c(i);w=k(Q,f),Q.forEach(s),v=m(h),d=r(h,"TD",{});var g=c(d);A=k(g,D),g.forEach(s),S=m(h),l=r(h,"TD",{});var at=c(l);_=k(at,u),at.forEach(s),$=m(h),O=r(h,"TD",{});var o=c(O);R=k(o,P),o.forEach(s),H=m(h),b=r(h,"TD",{});var E=c(b);V=k(E,B),E.forEach(s),F=m(h),C=r(h,"TD",{});var I=c(C);U=r(I,"INPUT",{class:!0,type:!0}),I.forEach(s),J=m(h),M=r(h,"TD",{});var G=c(M);W=r(G,"BUTTON",{class:!0});var T=c(W);x=k(T,"Edit"),T.forEach(s),K=m(G),Y=r(G,"BUTTON",{class:!0});var Z=c(Y);tt=k(Z,"Delete"),Z.forEach(s),G.forEach(s),j=m(h),h.forEach(s),this.h()},h(){y(U,"class","toggle toggle-primary"),y(U,"type","checkbox"),y(W,"class","btn btn-sm btn-primary"),y(Y,"class","btn btn-sm btn-error")},m(z,h){st(z,e,h),t(e,i),t(i,w),t(e,v),t(e,d),t(d,A),t(e,S),t(e,l),t(l,_),t(e,$),t(e,O),t(O,R),t(e,H),t(e,b),t(b,V),t(e,F),t(e,C),t(C,U),U.checked=a[8].isActive,t(e,J),t(e,M),t(M,W),t(W,x),t(M,K),t(M,Y),t(Y,tt),t(e,j),X||(q=nt(U,"change",et),X=!0)},p(z,h){a=z,h&1&&D!==(D=a[8].name+"")&&lt(A,D),h&1&&u!==(u=a[8]._count.users+"")&&lt(_,u),h&1&&P!==(P=a[8].createdAt.toLocaleString()+"")&&lt(R,P),h&1&&B!==(B=a[8].updatedAt.toLocaleString()+"")&&lt(V,B),h&1&&(U.checked=a[8].isActive)},d(z){z&&s(e),X=!1,q()}}}function Lt(a){let e,i,f,w,v,d,D,A,S,l,u,_,$,O,P,R;return{c(){e=n("div"),i=n("h1"),f=N("New role"),w=p(),v=n("div"),d=n("label"),D=n("span"),A=N("name"),S=p(),l=n("input"),u=p(),_=n("div"),$=n("button"),O=N("Create"),this.h()},l(H){e=r(H,"DIV",{class:!0});var b=c(e);i=r(b,"H1",{class:!0});var B=c(i);f=k(B,"New role"),B.forEach(s),w=m(b),v=r(b,"DIV",{class:!0});var V=c(v);d=r(V,"LABEL",{class:!0});var F=c(d);D=r(F,"SPAN",{class:!0});var C=c(D);A=k(C,"name"),C.forEach(s),F.forEach(s),S=m(V),l=r(V,"INPUT",{type:!0,placeholder:!0,class:!0}),V.forEach(s),u=m(b),_=r(b,"DIV",{class:!0});var U=c(_);$=r(U,"BUTTON",{class:!0});var J=c($);O=k(J,"Create"),J.forEach(s),U.forEach(s),b.forEach(s),this.h()},h(){y(i,"class","text-2xl"),y(D,"class","label-text"),y(d,"class","label"),y(l,"type","text"),y(l,"placeholder","name"),y(l,"class","input input-bordered"),y(v,"class","form-control"),y($,"class","btn btn-primary"),y(_,"class","form-control mt-6"),y(e,"class","card-body")},m(H,b){st(H,e,b),t(e,i),t(i,f),t(e,w),t(e,v),t(v,d),t(d,D),t(D,A),t(v,S),t(v,l),Et(l,a[2].name),t(e,u),t(e,_),t(_,$),t($,O),P||(R=[nt(l,"input",a[6]),nt($,"click",a[4])],P=!0)},p(H,b){b&4&&l.value!==H[2].name&&Et(l,H[2].name)},d(H){H&&s(e),P=!1,St(R)}}}function Ot(a){let e,i,f,w,v,d,D,A,S,l,u,_,$,O,P,R,H,b,B,V,F,C,U,J,M,W,x,K,Y,tt,j,X,q,et,z,h;d=new It({props:{pagination:a[0].pagination,url:a[3].url.href}});let Q=a[0].roles,g=[];for(let o=0;o<Q.length;o+=1)g[o]=Dt(At(a,Q,o));let at={$$slots:{default:[Lt]},$$scope:{ctx:a}};return q=new Ct({props:at}),a[7](q),{c(){e=n("div"),i=n("div"),f=n("button"),w=N("Create"),v=p(),_t(d.$$.fragment),D=p(),A=n("table"),S=n("thead"),l=n("tr"),u=n("th"),_=p(),$=n("th"),O=N("Name"),P=p(),R=n("th"),H=N("Users"),b=p(),B=n("th"),V=N("Created @"),F=p(),C=n("th"),U=N("Updated @"),J=p(),M=n("th"),W=N("Active"),x=p(),K=n("th"),Y=N("Actions"),tt=p(),j=n("tbody");for(let o=0;o<g.length;o+=1)g[o].c();X=p(),_t(q.$$.fragment),this.h()},l(o){e=r(o,"DIV",{class:!0});var E=c(e);i=r(E,"DIV",{class:!0});var I=c(i);f=r(I,"BUTTON",{class:!0});var G=c(f);w=k(G,"Create"),G.forEach(s),I.forEach(s),v=m(E),pt(d.$$.fragment,E),D=m(E),A=r(E,"TABLE",{class:!0});var T=c(A);S=r(T,"THEAD",{});var Z=c(S);l=r(Z,"TR",{});var L=c(l);u=r(L,"TH",{}),c(u).forEach(s),_=m(L),$=r(L,"TH",{});var ot=c($);O=k(ot,"Name"),ot.forEach(s),P=m(L),R=r(L,"TH",{});var ct=c(R);H=k(ct,"Users"),ct.forEach(s),b=m(L),B=r(L,"TH",{});var it=c(B);V=k(it,"Created @"),it.forEach(s),F=m(L),C=r(L,"TH",{});var dt=c(C);U=k(dt,"Updated @"),dt.forEach(s),J=m(L),M=r(L,"TH",{});var ht=c(M);W=k(ht,"Active"),ht.forEach(s),x=m(L),K=r(L,"TH",{});var ut=c(K);Y=k(ut,"Actions"),ut.forEach(s),L.forEach(s),Z.forEach(s),tt=m(T),j=r(T,"TBODY",{});var ft=c(j);for(let rt=0;rt<g.length;rt+=1)g[rt].l(ft);ft.forEach(s),T.forEach(s),E.forEach(s),X=m(o),pt(q.$$.fragment,o),this.h()},h(){y(f,"class","btn btn-primary"),y(i,"class","flex flex-row mb-4"),y(A,"class","table table-zebra w-full"),y(e,"class","overflow-x-auto flex flex-col")},m(o,E){st(o,e,E),t(e,i),t(i,f),t(f,w),t(e,v),mt(d,e,null),t(e,D),t(e,A),t(A,S),t(S,l),t(l,u),t(l,_),t(l,$),t($,O),t(l,P),t(l,R),t(R,H),t(l,b),t(l,B),t(B,V),t(l,F),t(l,C),t(C,U),t(l,J),t(l,M),t(M,W),t(l,x),t(l,K),t(K,Y),t(A,tt),t(A,j);for(let I=0;I<g.length;I+=1)g[I]&&g[I].m(j,null);st(o,X,E),mt(q,o,E),et=!0,z||(h=nt(f,"click",function(){Ht(a[1].open)&&a[1].open.apply(this,arguments)}),z=!0)},p(o,[E]){a=o;const I={};if(E&1&&(I.pagination=a[0].pagination),E&8&&(I.url=a[3].url.href),d.$set(I),E&1){Q=a[0].roles;let T;for(T=0;T<Q.length;T+=1){const Z=At(a,Q,T);g[T]?g[T].p(Z,E):(g[T]=Dt(Z),g[T].c(),g[T].m(j,null))}for(;T<g.length;T+=1)g[T].d(1);g.length=Q.length}const G={};E&2052&&(G.$$scope={dirty:E,ctx:a}),q.$set(G)},i(o){et||(vt(d.$$.fragment,o),vt(q.$$.fragment,o),et=!0)},o(o){bt(d.$$.fragment,o),bt(q.$$.fragment,o),et=!1},d(o){o&&s(e),gt(d),kt(g,o),o&&s(X),a[7](null),gt(q,o),z=!1,h()}}}function Pt(a,e,i){let f;wt(a,Bt,u=>i(3,f=u));let w,{data:v}=e,d={name:""};async function D(){(await fetch("/api/roles/create",{method:"POST",body:JSON.stringify(d)})).ok?(Tt.update(_=>[..._,{type:"success",message:"Role created"}]),w.close()):Tt.update(_=>[..._,{type:"error",message:"Failed to create role"}])}function A(u,_){u[_].isActive=this.checked,i(0,v)}function S(){d.name=this.value,i(2,d)}function l(u){Ut[u?"unshift":"push"](()=>{w=u,i(1,w)})}return a.$$set=u=>{"data"in u&&i(0,v=u.data)},[v,w,d,f,D,A,S,l]}class Ft extends yt{constructor(e){super(),$t(this,e,Pt,Ot,Nt,{data:0})}}export{Ft as default};
