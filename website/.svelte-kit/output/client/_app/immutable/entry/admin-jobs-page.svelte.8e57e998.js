import{S as Et,i as Tt,s as kt,k as c,y as At,a as g,q as E,l as f,m as d,z as Dt,c as v,h as n,r as T,n as N,b as J,C as e,A as yt,H as St,g as Ht,d as It,B as Lt,E as Bt,F as Rt,u as at,G as ct}from"../chunks/index.c7fa5583.js";import{i as wt}from"../chunks/navigation.38e53729.js";import{p as Nt}from"../chunks/stores.1249a1df.js";import{P as Pt}from"../chunks/pagination.82eda5f1.js";function gt(i,t,r){const a=i.slice();return a[3]=t[r],a[5]=r,a}function Ut(i){let t=i[3].status+"",r;return{c(){r=E(t)},l(a){r=T(a,t)},m(a,s){J(a,r,s)},p(a,s){s&1&&t!==(t=a[3].status+"")&&at(r,t)},d(a){a&&n(r)}}}function $t(i){let t=Math.round((i[3].updatedAt.getTime()-i[3].createdAt.getTime())/i[3].progress*(100-i[3].progress)/1e3/60)+"",r,a;return{c(){r=E(t),a=E("m remaining")},l(s){r=T(s,t),a=T(s,"m remaining")},m(s,h){J(s,r,h),J(s,a,h)},p(s,h){h&1&&t!==(t=Math.round((s[3].updatedAt.getTime()-s[3].createdAt.getTime())/s[3].progress*(100-s[3].progress)/1e3/60)+"")&&at(r,t)},d(s){s&&n(r),s&&n(a)}}}function Ot(i){let t,r;return{c(){t=c("progress"),this.h()},l(a){t=f(a,"PROGRESS",{class:!0,max:!0}),d(t).forEach(n),this.h()},h(){N(t,"class","progress w-56"),t.value=r=i[3].progress,N(t,"max","100"),ct(t,"progress-primary",i[3].progress<100),ct(t,"progress-success",i[3].progress===100)},m(a,s){J(a,t,s)},p(a,s){s&1&&r!==(r=a[3].progress)&&(t.value=r),s&1&&ct(t,"progress-primary",a[3].progress<100),s&1&&ct(t,"progress-success",a[3].progress===100)},d(a){a&&n(t)}}}function Ct(i){let t,r=i[3].error+"",a;return{c(){t=c("kbd"),a=E(r),this.h()},l(s){t=f(s,"KBD",{class:!0});var h=d(t);a=T(h,r),h.forEach(n),this.h()},h(){N(t,"class","text-error")},m(s,h){J(s,t,h),e(t,a)},p(s,h){h&1&&r!==(r=s[3].error+"")&&at(a,r)},d(s){s&&n(t)}}}function vt(i){let t,r;return{c(){t=c("button"),r=E("Retry"),this.h()},l(a){t=f(a,"BUTTON",{class:!0});var s=d(t);r=T(s,"Retry"),s.forEach(n),this.h()},h(){N(t,"class","btn btn-sm btn-primary")},m(a,s){J(a,t,s),e(t,r)},d(a){a&&n(t)}}}function bt(i){var ot,M;let t,r,a=i[5]+1+"",s,h,A,C=i[3].type+"",L,H,B,u=((M=(ot=i[3].media)==null?void 0:ot.post)==null?void 0:M.title)+"",F,Q,I,W,P,j,G,V=i[3].createdAt.toLocaleString()+"",U,X,q,R=i[3].updatedAt.toLocaleString()+"",K,Z,S,$,x,z,tt;function rt(o,l){return o[3].status==="RUNNING"?$t:Ut}let O=rt(i),y=O(i);function st(o,l){return o[3].status==="FAILED"?Ct:Ot}let w=st(i),D=w(i),_=i[3].status==="FAILED"&&vt();return{c(){t=c("tr"),r=c("td"),s=E(a),h=g(),A=c("td"),L=E(C),H=g(),B=c("td"),F=E(u),Q=g(),I=c("td"),y.c(),W=g(),P=c("td"),D.c(),j=g(),G=c("td"),U=E(V),X=g(),q=c("td"),K=E(R),Z=g(),S=c("td"),$=c("button"),x=E("Stop"),z=g(),_&&_.c(),tt=g(),this.h()},l(o){t=f(o,"TR",{});var l=d(t);r=f(l,"TD",{});var k=d(r);s=T(k,a),k.forEach(n),h=v(l),A=f(l,"TD",{});var p=d(A);L=T(p,C),p.forEach(n),H=v(l),B=f(l,"TD",{});var b=d(B);F=T(b,u),b.forEach(n),Q=v(l),I=f(l,"TD",{});var Y=d(I);y.l(Y),Y.forEach(n),W=v(l),P=f(l,"TD",{});var et=d(P);D.l(et),et.forEach(n),j=v(l),G=f(l,"TD",{});var nt=d(G);U=T(nt,V),nt.forEach(n),X=v(l),q=f(l,"TD",{});var m=d(q);K=T(m,R),m.forEach(n),Z=v(l),S=f(l,"TD",{});var lt=d(S);$=f(lt,"BUTTON",{class:!0});var it=d($);x=T(it,"Stop"),it.forEach(n),z=v(lt),_&&_.l(lt),lt.forEach(n),tt=v(l),l.forEach(n),this.h()},h(){N($,"class","btn btn-sm btn-error")},m(o,l){J(o,t,l),e(t,r),e(r,s),e(t,h),e(t,A),e(A,L),e(t,H),e(t,B),e(B,F),e(t,Q),e(t,I),y.m(I,null),e(t,W),e(t,P),D.m(P,null),e(t,j),e(t,G),e(G,U),e(t,X),e(t,q),e(q,K),e(t,Z),e(t,S),e(S,$),e($,x),e(S,z),_&&_.m(S,null),e(t,tt)},p(o,l){var k,p;l&1&&C!==(C=o[3].type+"")&&at(L,C),l&1&&u!==(u=((p=(k=o[3].media)==null?void 0:k.post)==null?void 0:p.title)+"")&&at(F,u),O===(O=rt(o))&&y?y.p(o,l):(y.d(1),y=O(o),y&&(y.c(),y.m(I,null))),w===(w=st(o))&&D?D.p(o,l):(D.d(1),D=w(o),D&&(D.c(),D.m(P,null))),l&1&&V!==(V=o[3].createdAt.toLocaleString()+"")&&at(U,V),l&1&&R!==(R=o[3].updatedAt.toLocaleString()+"")&&at(K,R),o[3].status==="FAILED"?_||(_=vt(),_.c(),_.m(S,null)):_&&(_.d(1),_=null)},d(o){o&&n(t),y.d(),D.d(),_&&_.d()}}}function Ft(i){let t,r,a,s,h,A,C,L,H,B,u,F,Q,I,W,P,j,G,V,U,X,q,R,K,Z,S,$,x,z,tt,rt,O,y,st,w,D,_,ot;a=new Pt({props:{pagination:i[0].pagination,url:i[1].url.href}});let M=i[0].jobs,o=[];for(let l=0;l<M.length;l+=1)o[l]=bt(gt(i,M,l));return{c(){t=c("div"),r=c("div"),At(a.$$.fragment),s=g(),h=c("button"),A=c("i"),C=g(),L=c("div"),H=c("table"),B=c("thead"),u=c("tr"),F=c("th"),Q=g(),I=c("th"),W=E("Type"),P=g(),j=c("th"),G=E("Title"),V=g(),U=c("th"),X=E("Status"),q=g(),R=c("th"),K=E("Progress"),Z=g(),S=c("th"),$=E("Created @"),x=g(),z=c("th"),tt=E("Updated @"),rt=g(),O=c("th"),y=E("Actions"),st=g(),w=c("tbody");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){t=f(l,"DIV",{class:!0});var k=d(t);r=f(k,"DIV",{class:!0});var p=d(r);Dt(a.$$.fragment,p),s=v(p),h=f(p,"BUTTON",{class:!0});var b=d(h);A=f(b,"I",{class:!0}),d(A).forEach(n),b.forEach(n),p.forEach(n),C=v(k),L=f(k,"DIV",{class:!0});var Y=d(L);H=f(Y,"TABLE",{class:!0});var et=d(H);B=f(et,"THEAD",{});var nt=d(B);u=f(nt,"TR",{});var m=d(u);F=f(m,"TH",{}),d(F).forEach(n),Q=v(m),I=f(m,"TH",{});var lt=d(I);W=T(lt,"Type"),lt.forEach(n),P=v(m),j=f(m,"TH",{});var it=d(j);G=T(it,"Title"),it.forEach(n),V=v(m),U=f(m,"TH",{});var dt=d(U);X=T(dt,"Status"),dt.forEach(n),q=v(m),R=f(m,"TH",{});var ht=d(R);K=T(ht,"Progress"),ht.forEach(n),Z=v(m),S=f(m,"TH",{});var ut=d(S);$=T(ut,"Created @"),ut.forEach(n),x=v(m),z=f(m,"TH",{});var _t=d(z);tt=T(_t,"Updated @"),_t.forEach(n),rt=v(m),O=f(m,"TH",{});var pt=d(O);y=T(pt,"Actions"),pt.forEach(n),m.forEach(n),nt.forEach(n),st=v(et),w=f(et,"TBODY",{});var mt=d(w);for(let ft=0;ft<o.length;ft+=1)o[ft].l(mt);mt.forEach(n),et.forEach(n),Y.forEach(n),k.forEach(n),this.h()},h(){N(A,"class","fa-solid fa-refresh"),N(h,"class","btn btn-ghost"),N(r,"class","flex flex-row justify-between items-baseline"),N(H,"class","table table-zebra w-full"),N(L,"class","overflow-x-auto"),N(t,"class","flex flex-col")},m(l,k){J(l,t,k),e(t,r),yt(a,r,null),e(r,s),e(r,h),e(h,A),e(t,C),e(t,L),e(L,H),e(H,B),e(B,u),e(u,F),e(u,Q),e(u,I),e(I,W),e(u,P),e(u,j),e(j,G),e(u,V),e(u,U),e(U,X),e(u,q),e(u,R),e(R,K),e(u,Z),e(u,S),e(S,$),e(u,x),e(u,z),e(z,tt),e(u,rt),e(u,O),e(O,y),e(H,st),e(H,w);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(w,null);D=!0,_||(ot=St(h,"click",i[2]),_=!0)},p(l,[k]){const p={};if(k&1&&(p.pagination=l[0].pagination),k&2&&(p.url=l[1].url.href),a.$set(p),k&1){M=l[0].jobs;let b;for(b=0;b<M.length;b+=1){const Y=gt(l,M,b);o[b]?o[b].p(Y,k):(o[b]=bt(Y),o[b].c(),o[b].m(w,null))}for(;b<o.length;b+=1)o[b].d(1);o.length=M.length}},i(l){D||(Ht(a.$$.fragment,l),D=!0)},o(l){It(a.$$.fragment,l),D=!1},d(l){l&&n(t),Lt(a),Bt(o,l),_=!1,ot()}}}function jt(i,t,r){let a;Rt(i,Nt,A=>r(1,a=A));let{data:s}=t;const h=()=>{wt()};return i.$$set=A=>{"data"in A&&r(0,s=A.data)},[s,a,h]}class Mt extends Et{constructor(t){super(),Tt(this,t,jt,Ft,kt,{data:0})}}export{Mt as default};
